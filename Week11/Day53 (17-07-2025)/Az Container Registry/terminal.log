presidio@Presidios-MacBook-Pro Day53 (17-07-2025) % az login
A web browser has been opened at https://login.microsoftonline.com/organizations/oauth2/v2.0/authorize. Please continue the login in the web browser. If no web browser is available or if the web browser fails to open, use device code flow with `az login --use-device-code`.

Retrieving tenants and subscriptions for the selection...
The following tenants don't contain accessible subscriptions. Use `az login --allow-no-subscriptions` to have tenant level access.
7f7268a4-7179-4a42-9837-40255b1c21e5 'Presidio Network Solutions'
6c4e0f67-00c8-475b-b1d4-cf723426db0b 'Pyramid Consulting, Inc.'

[Tenant and subscription selection]

No     Subscription name    Subscription ID                       Tenant
-----  -------------------  ------------------------------------  ----------------------------
[1] *  DevOps - Training    e34397b2-486a-417d-bd5a-b9113a4a1b0c  Presidio Networked Solutions

The default is marked with an *; the default tenant is 'Presidio Networked Solutions' and subscription is 'DevOps - Training' (e34397b2-486a-417d-bd5a-b9113a4a1b0c).

Select a subscription and tenant (Type a number or Enter for no changes): 

Tenant: Presidio Networked Solutions
Subscription: DevOps - Training (e34397b2-486a-417d-bd5a-b9113a4a1b0c)

[Announcements]
With the new Azure CLI login experience, you can select the subscription you want to use more easily. Learn more about it and its configuration at https://go.microsoft.com/fwlink/?linkid=2271236

If you encounter any problem, please open an issue at https://aka.ms/azclibug

[Warning] The login output has been updated. Please be aware that it no longer displays the full list of available subscriptions by default.

presidio@Presidios-MacBook-Pro Day53 (17-07-2025) % az acr create --resource-group Chowdri-rg --name container022 --sku Basic
{
  "adminUserEnabled": false,
  "anonymousPullEnabled": false,
  "autoGeneratedDomainNameLabelScope": "Unsecure",
  "creationDate": "2025-07-17T04:09:03.731836+00:00",
  "dataEndpointEnabled": false,
  "dataEndpointHostNames": [],
  "encryption": {
    "keyVaultProperties": null,
    "status": "disabled"
  },
  "id": "/subscriptions/e34397b2-486a-417d-bd5a-b9113a4a1b0c/resourceGroups/Chowdri-rg/providers/Microsoft.ContainerRegistry/registries/container022",
  "identity": null,
  "location": "eastus",
  "loginServer": "container022.azurecr.io",
  "metadataSearch": "Disabled",
  "name": "container022",
  "networkRuleBypassOptions": "AzureServices",
  "networkRuleSet": null,
  "policies": {
    "azureAdAuthenticationAsArmPolicy": {
      "status": "enabled"
    },
    "exportPolicy": {
      "status": "enabled"
    },
    "quarantinePolicy": {
      "status": "disabled"
    },
    "retentionPolicy": {
      "days": 7,
      "lastUpdatedTime": "2025-07-17T04:09:12.665149+00:00",
      "status": "disabled"
    },
    "softDeletePolicy": {
      "lastUpdatedTime": "2025-07-17T04:09:12.665195+00:00",
      "retentionDays": 7,
      "status": "disabled"
    },
    "trustPolicy": {
      "status": "disabled",
      "type": "Notary"
    }
  },
  "privateEndpointConnections": [],
  "provisioningState": "Succeeded",
  "publicNetworkAccess": "Enabled",
  "resourceGroup": "Chowdri-rg",
  "roleAssignmentMode": "LegacyRegistryPermissions",
  "sku": {
    "name": "Basic",
    "tier": "Basic"
  },
  "status": null,
  "systemData": {
    "createdAt": "2025-07-17T04:09:03.731836+00:00",
    "createdBy": "chowdris@presidio.com",
    "createdByType": "User",
    "lastModifiedAt": "2025-07-17T04:09:03.731836+00:00",
    "lastModifiedBy": "chowdris@presidio.com",
    "lastModifiedByType": "User"
  },
  "tags": {
    "Backup": "True"
  },
  "type": "Microsoft.ContainerRegistry/registries",
  "zoneRedundancy": "Disabled"
}
presidio@Presidios-MacBook-Pro Day53 (17-07-2025) % code Dockerfile
zsh: command not found: code
presidio@Presidios-MacBook-Pro Day53 (17-07-2025) % az acr build --registry container022 --image helloacrtasks:v1 .
Packing source code into tar to upload...
Uploading archived source code from '/var/folders/0z/qhz3y6k50rl_2clbcg6h7kwm0000gn/T/build_archive_c00895b1db6140099ab923a55cd45e8a.tar.gz'...
Sending context (498.000 Bytes) to registry: container022...
Queued a build with ID: ca1
Waiting for an agent...
2025/07/17 04:11:20 Downloading source code...
2025/07/17 04:11:21 Finished downloading source code
2025/07/17 04:11:21 Using acb_vol_0b053ce9-d9f8-4304-9411-beccaee434cc as the home volume
2025/07/17 04:11:21 Setting up Docker configuration...
2025/07/17 04:11:22 Successfully set up Docker configuration
2025/07/17 04:11:22 Logging in to registry: container022.azurecr.io
2025/07/17 04:11:22 Successfully logged into container022.azurecr.io
2025/07/17 04:11:22 Executing step ID: build. Timeout(sec): 28800, Working directory: '', Network: ''
2025/07/17 04:11:22 Scanning for dependencies...
2025/07/17 04:11:23 Successfully scanned dependencies
2025/07/17 04:11:23 Launching container with name: build
Sending build context to Docker daemon  3.072kB
Step 1/6 : FROM    node:9-alpine
9-alpine: Pulling from library/node
a073c86ecf9e: Pulling fs layer
0e28711eb56d: Pulling fs layer
e460dd483fdd: Pulling fs layer
a073c86ecf9e: Download complete
e460dd483fdd: Verifying Checksum
e460dd483fdd: Download complete
0e28711eb56d: Verifying Checksum
0e28711eb56d: Download complete
a073c86ecf9e: Pull complete
0e28711eb56d: Pull complete
e460dd483fdd: Pull complete
Digest: sha256:8dafc0968fb4d62834d9b826d85a8feecc69bd72cd51723c62c7db67c6dec6fa
Status: Downloaded newer image for node:9-alpine
 ---> a56170f59699
Step 2/6 : ADD     https://raw.githubusercontent.com/Azure-Samples/acr-build-helloworld-node/master/package.json /

 ---> 5467d7d9d5d7
Step 3/6 : ADD     https://raw.githubusercontent.com/Azure-Samples/acr-build-helloworld-node/master/server.js /

 ---> 4b31a92f947e
Step 4/6 : RUN     npm install
 ---> Running in 4a4bcb5f7825
npm notice created a lockfile as package-lock.json. You should commit this file.
npm WARN helloworld@1.0.0 No repository field.

up to date in 0.051s
Removing intermediate container 4a4bcb5f7825
 ---> 462dc21da3c2
Step 5/6 : EXPOSE  80
 ---> Running in d44639f485d5
Removing intermediate container d44639f485d5
 ---> 36a035972d1a
Step 6/6 : CMD     ["node", "server.js"]
 ---> Running in 2032ee182473
Removing intermediate container 2032ee182473
 ---> f5ffcbb33518
Successfully built f5ffcbb33518
Successfully tagged container022.azurecr.io/helloacrtasks:v1
2025/07/17 04:11:30 Successfully executed container: build
2025/07/17 04:11:30 Executing step ID: push. Timeout(sec): 3600, Working directory: '', Network: ''
2025/07/17 04:11:30 Pushing image: container022.azurecr.io/helloacrtasks:v1, attempt 1
The push refers to repository [container022.azurecr.io/helloacrtasks]
5209ca700bf5: Preparing
105fab5e99d4: Preparing
51978827661c: Preparing
172ed8ca5e43: Preparing
8c9992f4e5dd: Preparing
8dfad2055603: Preparing
8dfad2055603: Waiting
105fab5e99d4: Pushed
51978827661c: Pushed
5209ca700bf5: Pushed
172ed8ca5e43: Pushed
8dfad2055603: Pushed
8c9992f4e5dd: Pushed
v1: digest: sha256:f4c1c3c4a820f648ae2398084171043d4a4a541267a5c47bd1030bae5314683b size: 1572
2025/07/17 04:11:34 Successfully pushed image: container022.azurecr.io/helloacrtasks:v1
2025/07/17 04:11:34 Step ID: build marked as successful (elapsed time in seconds: 7.605751)
2025/07/17 04:11:34 Populating digests for step ID: build...
2025/07/17 04:11:35 Successfully populated digests for step ID: build
2025/07/17 04:11:35 Step ID: push marked as successful (elapsed time in seconds: 4.672589)
2025/07/17 04:11:35 The following dependencies were found:
2025/07/17 04:11:35 
- image:
    registry: container022.azurecr.io
    repository: helloacrtasks
    tag: v1
    digest: sha256:f4c1c3c4a820f648ae2398084171043d4a4a541267a5c47bd1030bae5314683b
  runtime-dependency:
    registry: registry.hub.docker.com
    repository: library/node
    tag: 9-alpine
    digest: sha256:8dafc0968fb4d62834d9b826d85a8feecc69bd72cd51723c62c7db67c6dec6fa
  git: {}


Run ID: ca1 was successful after 16s
presidio@Presidios-MacBook-Pro Day53 (17-07-2025) % az acr repository list --name container022 --output table
Result
-------------
helloacrtasks
presidio@Presidios-MacBook-Pro Day53 (17-07-2025) % az acr update -n container022 --admin-enabled true
{
  "adminUserEnabled": true,
  "anonymousPullEnabled": false,
  "autoGeneratedDomainNameLabelScope": "Unsecure",
  "creationDate": "2025-07-17T04:09:03.731836+00:00",
  "dataEndpointEnabled": false,
  "dataEndpointHostNames": [],
  "encryption": {
    "keyVaultProperties": null,
    "status": "disabled"
  },
  "id": "/subscriptions/e34397b2-486a-417d-bd5a-b9113a4a1b0c/resourceGroups/Chowdri-rg/providers/Microsoft.ContainerRegistry/registries/container022",
  "identity": null,
  "location": "eastus",
  "loginServer": "container022.azurecr.io",
  "metadataSearch": "Disabled",
  "name": "container022",
  "networkRuleBypassOptions": "AzureServices",
  "networkRuleSet": null,
  "policies": {
    "azureAdAuthenticationAsArmPolicy": {
      "status": "enabled"
    },
    "exportPolicy": {
      "status": "enabled"
    },
    "quarantinePolicy": {
      "status": "disabled"
    },
    "retentionPolicy": {
      "days": 7,
      "lastUpdatedTime": "2025-07-17T04:09:12.665149+00:00",
      "status": "disabled"
    },
    "softDeletePolicy": {
      "lastUpdatedTime": "2025-07-17T04:09:12.665195+00:00",
      "retentionDays": 7,
      "status": "disabled"
    },
    "trustPolicy": {
      "status": "disabled",
      "type": "Notary"
    }
  },
  "privateEndpointConnections": [],
  "provisioningState": "Succeeded",
  "publicNetworkAccess": "Enabled",
  "resourceGroup": "Chowdri-rg",
  "roleAssignmentMode": "LegacyRegistryPermissions",
  "sku": {
    "name": "Basic",
    "tier": "Basic"
  },
  "status": null,
  "systemData": {
    "createdAt": "2025-07-17T04:09:03.731836+00:00",
    "createdBy": "chowdris@presidio.com",
    "createdByType": "User",
    "lastModifiedAt": "2025-07-17T04:13:26.745649+00:00",
    "lastModifiedBy": "chowdris@presidio.com",
    "lastModifiedByType": "User"
  },
  "tags": {
    "Backup": "True"
  },
  "type": "Microsoft.ContainerRegistry/registries",
  "zoneRedundancy": "Disabled"
}
presidio@Presidios-MacBook-Pro Day53 (17-07-2025) % az acr credential show --name container022
{
  "passwords": [
    {
      "name": "password",
      "value": "pA04cjWvtp7zKGQjvWEEkWAM868FlJbB++KCxLw19G+ACRDIin9B"
    },
    {
      "name": "password2",
      "value": "JhWBpOiKCnzmD1bmdUJKjkXfJD0n3NRhMtJ2fpi+23+ACRBgmtNu"
    }
  ],
  "username": "container022"
}
presidio@Presidios-MacBook-Pro Day53 (17-07-2025) % az container create --resource-group Chowdri-rg --name acr022 --image container022.azurecr.io/helloacrtasks:v1 --registry-login-server container022.azurecr.io --ip-address Public --location eastus --registry-username container022 --registry-password pA04cjWvtp7zKGQjvWEEkWAM868FlJbB++KCxLw19G+ACRDIin9B --os-type Linux --cpu 1 --memory 1
{
  "confidentialComputeProperties": null,
  "containerGroupProfile": null,
  "containers": [
    {
      "command": null,
      "configMap": {
        "keyValuePairs": {}
      },
      "environmentVariables": [],
      "image": "container022.azurecr.io/helloacrtasks:v1",
      "instanceView": {
        "currentState": {
          "detailStatus": "",
          "exitCode": null,
          "finishTime": null,
          "startTime": "2025-07-17T04:19:20.713000+00:00",
          "state": "Running"
        },
        "events": [
          {
            "count": 1,
            "firstTimestamp": "2025-07-17T04:19:01+00:00",
            "lastTimestamp": "2025-07-17T04:19:01+00:00",
            "message": "pulling image \"container022.azurecr.io/helloacrtasks@sha256:f4c1c3c4a820f648ae2398084171043d4a4a541267a5c47bd1030bae5314683b\"",
            "name": "Pulling",
            "type": "Normal"
          },
          {
            "count": 1,
            "firstTimestamp": "2025-07-17T04:19:05+00:00",
            "lastTimestamp": "2025-07-17T04:19:05+00:00",
            "message": "Successfully pulled image \"container022.azurecr.io/helloacrtasks@sha256:f4c1c3c4a820f648ae2398084171043d4a4a541267a5c47bd1030bae5314683b\"",
            "name": "Pulled",
            "type": "Normal"
          },
          {
            "count": 1,
            "firstTimestamp": "2025-07-17T04:19:20+00:00",
            "lastTimestamp": "2025-07-17T04:19:20+00:00",
            "message": "Started container",
            "name": "Started",
            "type": "Normal"
          }
        ],
        "previousState": null,
        "restartCount": 0
      },
      "livenessProbe": null,
      "name": "acr022",
      "ports": [
        {
          "port": 80,
          "protocol": "TCP"
        }
      ],
      "readinessProbe": null,
      "resources": {
        "limits": null,
        "requests": {
          "cpu": 1.0,
          "gpu": null,
          "memoryInGb": 1.0
        }
      },
      "securityContext": null,
      "volumeMounts": null
    }
  ],
  "diagnostics": null,
  "dnsConfig": null,
  "encryptionProperties": null,
  "extensions": null,
  "id": "/subscriptions/e34397b2-486a-417d-bd5a-b9113a4a1b0c/resourceGroups/Chowdri-rg/providers/Microsoft.ContainerInstance/containerGroups/acr022",
  "identity": null,
  "imageRegistryCredentials": [
    {
      "identity": null,
      "identityUrl": null,
      "isDelegatedIdentity": false,
      "password": null,
      "server": "container022.azurecr.io",
      "username": "container022"
    }
  ],
  "initContainers": [],
  "instanceView": {
    "events": [],
    "state": "Running"
  },
  "ipAddress": {
    "autoGeneratedDomainNameLabelScope": null,
    "dnsNameLabel": null,
    "fqdn": null,
    "ip": "172.214.7.8",
    "ports": [
      {
        "port": 80,
        "protocol": "TCP"
      }
    ],
    "type": "Public"
  },
  "isCreatedFromStandbyPool": false,
  "location": "eastus",
  "name": "acr022",
  "osType": "Linux",
  "priority": null,
  "provisioningState": "Succeeded",
  "resourceGroup": "Chowdri-rg",
  "restartPolicy": null,
  "sku": "Standard",
  "standbyPoolProfile": null,
  "subnetIds": null,
  "tags": {
    "Backup": "True"
  },
  "type": "Microsoft.ContainerInstance/containerGroups",
  "volumes": null,
  "zones": null
}
presidio@Presidios-MacBook-Pro Day53 (17-07-2025) % az container show --resource-group Chowdri-rg --name acr022 --query ipAddress.ip --output table
Result
-----------
172.214.7.8
presidio@Presidios-MacBook-Pro Day53 (17-07-2025) % az acr replication create --registry container022 --location japaneast
Replications are only supported for managed registries in Premium SKU.
presidio@Presidios-MacBook-Pro Day53 (17-07-2025) % az acr replication list --registry container022 --output table
Replications are only supported for managed registries in Premium SKU.
presidio@Presidios-MacBook-Pro Day53 (17-07-2025) % zzzzzzzzz